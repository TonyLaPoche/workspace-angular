
<div class="mat-elevation-z8 relative">
    @if(users.isLoading()) {
    <div class="absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-[rgba(0,0,0,0.15)]">
        <mat-spinner [diameter]="24"/>
    </div>
    }
    <table mat-table [dataSource]="users.value() || []" matSort (matSortChange)="sortAndPaginationEvent($event)" >
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
            <td mat-cell *matCellDef="let row"> {{row.name}} </td>
        </ng-container>

        <ng-container matColumnDef="age">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Age </th>
            <td mat-cell *matCellDef="let row"> {{row.age}} </td>
        </ng-container>

        <ng-container matColumnDef="city">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> City </th>
            <td mat-cell *matCellDef="let row"> {{row.city}} </td>
        </ng-container>

        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
            <td mat-cell *matCellDef="let row"> {{row.email}} </td>
        </ng-container>

        <ng-container matColumnDef="subscribe">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Subscribe </th>
            <td mat-cell *matCellDef="let row"> {{row.subscribe}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row h-24" *matNoDataRow>
                <td class="mat-cell text-center" colspan="5">
                    @if (users.isLoading()) {
                        Loading users...
                    } @else {
                        No users found.
                    }
                </td>
            </tr>

        @if (users.error()) {
            <tr class="mat-row h-24" *matNoDataRow>
                <td class="mat-cell text-center" colspan="5">{{users.error()}}...</td>
            </tr>
        }
    </table>
</div>
<mat-paginator (page)="sortAndPaginationEvent($event)" [length]="users.value()?.length" [pageSize]="1" aria-label="Select page of users"></mat-paginator>

